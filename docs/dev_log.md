# Дневник разработки

## 2026-01-10

- Обновление: логи переведены в UTF-16LE с BOM для корректного отображения русского текста.
- Обновление: логи процессов теперь сохраняются в подпапку `p`, для каждого процесса отдельный файл с событиями `открыт/работает/закрыт`, добавлена запись `работает` при старте и каждый час.
- Обновление: путь по умолчанию (`--out` не задан) теперь указывает на подпапку `p` в текущем каталоге запуска.
- Обновление: устранено предупреждение C4005 (PASCAL) за счет корректного порядка include `Windows.h`/`Lmcons.h`.
- Обновление: добавлен пример запуска без `--out` в README.
- Обновление: при смене даты сбрасывается трекинг процессов, чтобы записи шли в новую дневную папку.
- Обновление: /utf-8 подключен для всех целей сборки, чтобы корректно компилировались русские строки.
- Дальше: прогнать сборку и тесты на локальной машине.

## 2026-01-09

- Сделано: создан каркас CMake, разбивка на модули, реализованы DXGI захват и GDI fallback, WIC кодирование JPEG, CLI и логирование, базовый набор тестов и CI.
- Обновление: параметр `--out` стал необязательным, по умолчанию используется текущая папка; README обновлен.
- Обновление: добавлена проверка черного кадра DXGI и принудительный переход на GDI при необходимости.
- Обновление: добавлен периодический режим — скриншоты каждые N секунд (по умолчанию 10), параметры `--interval-seconds` и `--count`, E2E тест ограничен `--count 1`.
- Обновление: добавлено сканирование процессов с логированием появления/завершения и временем работы.
- Обновление: разделены логи — основной лог теперь рядом с приложением, лог процессов остается в папке вывода.
- Решения: выбран Desktop Duplication как самый быстрый путь захвата; GDI оставлен как совместимый fallback; качество JPEG установлено на 0.01 для максимального сжатия; лог-файл хранится по датам.
- Проблемы/риски: возможны таймауты Desktop Duplication; не учитывается поворот экрана (rotation); E2E в CI использует синтетический режим.
- Дальше: прогнать тесты локально и проверить на реальных мульти-мониторных конфигурациях.
